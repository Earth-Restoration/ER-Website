<!DOCTYPE html>
<html lang="en-US">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-4W6LXX2YEY"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-4W6LXX2YEY");
    </script>

    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>Tree Species</title>

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://restore.earth/" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Earth Restoration" />
    <meta
      property="og:description"
      content="Hello, Earthrestoration (Pvt) Ltd (ER) is a registered private company in Sri Lanka (e.s.t 2019) established
                                   with the core mission to design ecosystem restoration projects using the photosynthetic component of biomass as an 
                                   indicator of success and rewards tree-care practices."
    />
    <meta
      property="og:image"
      content="https://restore.earth/assets/img/Logoicon.png"
    />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Raleway:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Add the Bootstrap JavaScript library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.5.0/js/bootstrap.min.js"></script>

    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link
      href="assets/vendor/glightbox/css/glightbox.min.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

    <!-- Template Main CSS File -->
    <link href="assets/css/main.css" rel="stylesheet" />


    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css"
    />
    <link rel="stylesheet" href="./assets/css/Tree_Species.css" />

    <script type="text/javascript">
      (function () {
        emailjs.init(/*public Key*/ "mmvgyCL8_H2l3K5ZQ");
      })();
    </script>

    <!-- =======================================================
  * Template Name: Impact - v1.0.0
  * Template URL: https://bootstrapmade.com/impact-bootstrap-business-website-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  </head>

  <body ng-app="plantApp">
    <!-- ======= Header ======= -->
    <section id="topbar" class="topbar d-flex align-items-center">
      <div
        class="container d-flex justify-content-center justify-content-md-between"
      >
        <div class="contact-info d-flex align-items-center">
          <i class="bi bi-envelope d-flex align-items-center">
            <a href="mailto:info@restore.earth">info@restore.earth</a></i
          >
          <i class="bi bi-phone d-flex align-items-center ms-4"
            ><span>+94 76 719 1428</span></i
          >
        </div>
        <div class="social-links d-none d-md-flex align-items-center">
          <a
            href="https://www.youtube.com/channel/UCL5dFM7Kr1dMapzjSJExftg?view_as=subscriber"
            class="youtube"
            ><i class="bi bi-youtube"></i
          ></a>
          <!-- <a href="#" class="twitter"><i class="bi bi-twitter"></i></a> -->
          <a
            href="https://www.facebook.com/profile.php?id=100045842366453"
            class="facebook"
            ><i class="bi bi-facebook"></i
          ></a>
          <!-- <a href="#" class="instagram"><i class="bi bi-instagram"></i></a> -->
          <a
            href="https://www.linkedin.com/company/earth-restoration/"
            class="linkedin"
            ><i class="bi bi-linkedin"></i
          ></a>
        </div>
      </div>
    </section>
    <!-- End Top Bar -->

    <header id="header" class="header d-flex align-items-center">
      <div
        class="container-fluid container-xl d-flex align-items-center justify-content-between"
      >
        <a href="index.html" class="logo d-flex align-items-center">
          <!-- Uncomment the line below if you also wish to use an image logo -->
          <img src="assets/img/ER LOGO1.png" alt="logo" />
        </a>
        <nav id="navbar" class="navbar">
          <ul class="navStyle">
            <li><a href="#hero">Home</a></li>
            <li><a href="#about">Who We Are </a></li>
            <li><a href="LifeForce.html">LifeForce </a></li>
            <li class="dropdown">
              <a href="#"
                ><span>Blogs</span>
                <i class="bi bi-chevron-down dropdown-indicator"></i
              ></a>
              <ul>
                <li><a href="Local_community.html">Local Community</a></li>
                <li><a href="global_community.html">Global Community</a></li>
              </ul>
            </li>
            <li><a href="#contact">Contact Us</a></li>

            <div
              id="google_translate_element"
              style="margin-left: 50px; margin-top: 10px; margin-bottom: 10px"
            ></div>
          </ul>
        </nav>
        <!-- .navbar -->

        <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
        <i
          class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"
          style="color: #fff"
        ></i>
      </div>
    </header>
    <!-- End Header -->

    <!--Tree Species-->
    <div ng-controller="plantController" class="container">
      <div class="row my-4">
        <div class="col-md-10">
          <!-- Search Input Section -->
          <div class="input-group">
            <input
              type="text"
              ng-model="searchText"
              class="form-control"
              placeholder="Search by Common Name, Botanical Name, or Plant Name"
            />
            <div class="input-group-append" ng-show="searchText">
              <button
                class="btn btn-outline-secondary"
                type="button"
                ng-click="clearSearchText()"
                style="border-radius: 0px 20px 20px 0px"
              >
                &times;
              </button>
            </div>
            <div class="col-md-8 button-padding">
              <button class="button-29" ng-click="search()">Search</button>
            </div>
          </div>
        </div>
        <div class="col-md-2 text-right">
          <!-- Filter Popover Section -->
          <i
            class="fa fa-filter"
            aria-hidden="true"
            popover-trigger="click"
            popover-placement="bottom"
            popover-is-open="showFilterPopover"
            ng-click="toggleFilterPopover()"
            style="cursor: pointer"
          > Filter</i>

          <div
            class="popover"
            ng-show="showFilterPopover"
            style="left: -50px; top: 25px"
          >
            <div class="arrow"></div>
            <div class="popover-body">
              <p><b>Origin of Species:</b></p>
              <hr />

              <div class="row">
                <div class="col">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      ng-model="filterByNative"
                      id="filterByNative"
                    />
                    <label class="form-check-label" for="filterByNative">
                      Native
                    </label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      ng-model="filterByEndemic"
                      id="filterByEndemic"
                    />
                    <label class="form-check-label" for="filterByEndemic">
                      Endemic
                    </label>
                  </div>
                </div>
                <div class="w-100"></div>
                <div class="col">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      ng-model="filterByExotic"
                      id="filterByExotic"
                    />
                    <label class="form-check-label" for="filterByExotic">
                      Exotic
                    </label>
                  </div>
                </div>
              </div>
              <br />

              <p><b>Fruit Types:</b></p>
              <hr />

              <div class="row">
                <div class="col">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      ng-model="fruitTypes.fleshy"
                      id="filterByFleshy"
                    />
                    <label class="form-check-label" for="filterByFleshy">
                      Fleshy fruit
                    </label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      ng-model="fruitTypes.dehiscent"
                      id="filterByDehiscent"
                    />
                    <label class="form-check-label" for="filterByDehiscent">
                      Dehiscent dry fruit
                    </label>
                  </div>
                </div>
                <div class="w-100"></div>
                <div class="col">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      ng-model="fruitTypes.translucent"
                      id="filterByTranslucent"
                    />
                    <label class="form-check-label" for="filterByTranslucent">
                      Translucent flesh
                    </label>
                  </div>
                </div>
              </div>

              <br />
              <div class="d-flex justify-content-center">
                <button class="button-28" ng-click="filter()">Filter</button>
              </div>
              <!-- Other filter options can be added here -->
            </div>
          </div>
        </div>
      </div>

      <hr />

      <div class="row">
        <!-- Plant Display Section -->
        <div ng-repeat="plant in getCurrentPagePlants()" class="col-md-4 mb-4">
          <div class="card ag-courses_item">
            <div class="slider">
              <div class="slide">
                <img
                  ng-src="{{ plant.imageUrl }}"
                  alt="Plant Image"
                  style="height: 30vh"
                />
              </div>
            </div>
            <div class="card-body">
              <h4 class="card-title">{{ plant.plantName }}</h4>
              <hr />
              <div class="row">
                <div class="col-sm-6">
                  <p>
                    <span class="species-text"
                      >Origin of Species: <br /><span class="species-text-02"
                        >{{ plant.originofSpecies }}</span
                      ></span
                    >
                  </p>
                </div>
                <div class="col-sm">
                  <p>
                    <span class="species-text"
                      >Fruit Type: <br /><span class="species-text-02"
                        >{{ plant.fruitType }}</span
                      ></span
                    >
                  </p>
                </div>
              </div>

              <p class="card-text">Common Names: {{ plant.commonNames }}</p>
              <p class="card-text">Botanical Name: {{ plant.botanicalName }}</p>
              <div class="d-flex justify-content-center">
                <button
                  class="button-28"
                  data-toggle="modal"
                  ng-click="openPlantModal(plant.plantName)"
                >
                  See Details
                </button>
              </div>
            </div>
          </div>
          <!-- Modal -->
          <div
            class="modal fade"
            id="exampleModal"
            tabindex="-1"
            role="dialog"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title text-center" id="exampleModalLabel">
                    {{ selectedPlantTitle }}
                  </h5>
                  <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                  >
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div class="container">
                    <div class="row">
                      <div class="col-sm">
                        <div class="chart-container">
                          <span class="chart-title"
                            >Photosynthetic Biomass Chart</span
                          ><br />
                          <canvas id="photosyntheticBiomassChart"></canvas>
                        </div>
                      </div>
                      <div class="col-sm">
                        <div class="chart-container">
                          <span class="chart-title"
                            >Average O2 and H2O Production</span
                          >
                          <canvas id="productionChart"></canvas>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="container">
                    <div class="row">
                      <div class="col">
                        <div class="model-details">
                          <div class="model-content">
                            <div class="model-heading">
                              <p>Taxonomy and Botanical Information</p>
                              <hr />
                            </div>
                            <p><b>Plant ID:</b> {{ selectedPlant.plant_id }}</p>
                            <p>
                              <b>Common Names:</b> {{ selectedPlant.commonNames
                              }}
                            </p>
                            <p>
                              <b>Botanical Name:</b> {{
                              selectedPlant.botanicalName }}
                            </p>
                            <p>
                              <b>Origin of Species:</b> {{
                              selectedPlant.originofSpecies }}
                            </p>
                            <p><b>Family:</b> {{ selectedPlant.family }}</p>
                            <p>
                              <b>AF Notation Physiognomy:</b> {{
                              selectedPlant.afNotationPhysiognomy }}
                            </p>
                            <p>
                              <b>Plant Reference on ER Plant Database:</b> {{
                              selectedPlant.plantReference_onERPlantDatabase }}
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="col">
                        <div class="model-details">
                          <div class="model-content">
                            <div class="model-heading">
                              <p>Morphological Characteristics</p>
                              <hr />
                            </div>
                            <p>
                              <b>Weight per Leaf:</b> {{
                              selectedPlant.weightPerLeaf }}
                            </p>
                            <p>
                              <b>Leaf Cycle:</b> {{ selectedPlant.leafCycle }}
                            </p>
                            <p><b>Length:</b> {{ selectedPlant.length }}</p>
                            <p><b>Width:</b> {{ selectedPlant.width }}</p>
                            <p><b>Texture:</b> {{ selectedPlant.texture }}</p>
                            <p>
                              <b>Growth Rate:</b> {{ selectedPlant.growthRate }}
                            </p>
                            <p>
                              <b>Crown Type:</b> {{ selectedPlant.crownType }}
                            </p>
                            <p>
                              <b>Root Type:</b> {{ selectedPlant.rootType }}
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="w-100"></div>
                      <div class="col">
                        <div class="model-details">
                          <div class="model-content">
                            <div class="model-heading">
                              <p>Ecological Information</p>
                              <hr />
                            </div>
                            <p>
                              <b>Preferred Solis:</b> {{
                              selectedPlant.preferredSolis }}
                            </p>
                            <p>
                              <b>Impact on Soil:</b> {{
                              selectedPlant.impactOnSoil }}
                            </p>
                            <p>
                              <b>Salinity Tolerance :</b> {{
                              selectedPlant.salinityTolerance }}
                            </p>
                            <p>
                              <b>Distribution:</b> {{ selectedPlant.distribution
                              }}
                            </p>
                            <p>
                              <b>LightPreferences:</b> {{
                              selectedPlant.lightPreferences }}
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="col">
                        <div class="model-details">
                          <div class="model-content">
                            <div class="model-heading">
                              <p>Reproduction, Uses, and Conservation</p>
                              <hr />
                            </div>
                            <p>
                              <b>Propagation Method:</b> {{
                              selectedPlant.propagationMethod }}
                            </p>
                            <p>
                              <b>Human Uses:</b> {{ selectedPlant.humanUses }}
                            </p>
                            <p>
                              <b>Economic Importance:</b> {{
                              selectedPlant.economicImportance }}
                            </p>
                            <p>
                              <b>FloweringTime:</b> {{
                              selectedPlant.floweringTime }}
                            </p>
                            <p>
                              <b>Flower Color:</b> {{ selectedPlant.flowerColor
                              }}
                            </p>
                            <p>
                              <b>Fruit Type:</b> {{ selectedPlant.fruitType }}
                            </p>
                            <p>
                              <b>Conservation Status:</b> {{
                              selectedPlant.conservationStatus }}
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="container">
                  <div class="row">
                    <div class="col-sm"></div>
                    <div class="col-sm"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Pagination Section -->
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <li class="page-item" ng-class="{ 'disabled': currentPage === 1 }">
            <a
              class="page-link"
              href="#"
              tabindex="-1"
              ng-click="goToPage(currentPage - 1)"
            >
              Previous
            </a>
          </li>
          <li
            class="page-item"
            ng-repeat="page in getPaginationArray()"
            ng-class="{ 'active': currentPage === page }"
          >
            <a class="page-link" href="#" ng-click="goToPage(page)"
              >{{ page }}</a
            >
          </li>
          <li
            class="page-item"
            ng-class="{ 'disabled': currentPage === getTotalPages() }"
          >
            <a class="page-link" href="#" ng-click="goToPage(currentPage + 1)"
              >Next</a
            >
          </li>
        </ul>
      </nav>
    </div>
    <!--Tree Scpecies-->

    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer">
      <div class="container">
        <div class="row">
          <div class="col-lg-5 col-md-12 footer-info">
            <div class="logo d-flex justify-content-center">
              <a href="index.html">
                <img
                  src="assets/img/Logoicon.png"
                  alt="Earth Restoration Logo"
                />
              </a>
            </div>

            <div class="weare d-flex justify-content-center">
              <p>
                We are aware that every NEW DATA entry and transaction costs
                energy. EarthRestoration hopes to clean and renewable energy
                driven server space for transacting LifeForce.
              </p>
            </div>

            <div class="social-links d-flex mt-4 justify-content-center">
              <a
                href="https://www.youtube.com/channel/UCL5dFM7Kr1dMapzjSJExftg?view_as=subscriber"
                class="youtube"
                ><i class="bi bi-youtube"></i
              ></a>

              <a
                href="https://www.facebook.com/people/EarthRestoration/100045842366453/"
                class="facebook"
                ><i class="bi bi-facebook"></i
              ></a>

              <a
                href="https://www.linkedin.com/company/earth-restoration/"
                class="linkedin"
                ><i class="bi bi-linkedin"></i
              ></a>
            </div>
          </div>

          <div class="col-lg-2 col-md-12 footer-links">
            <div class="d-flex justify-content-center">
              <h4>Useful Links</h4>
            </div>

            <div class="tablist d-flex justify-content-center">
              <ul>
                <li><a href="#hero">Home</a></li>
                <li><a href="#team">Our Team</a></li>
                <div class="dropdown">
                  <li>Blog</li>
                  <i class="bi bi-chevron-down dropdown-indicator"></i>
                  <div class="dropdown-content">
                    <li><a href="Local_community.html">Local Community</a></li>
                    <li>
                      <a href="global_community.html">Global Community</a>
                    </li>
                  </div>
                </div>
                <li><a href="#faqlist">FAQ's</a></li>
                <li><a href="LifeForce.html">LifeForce</a></li>
                <li>
                  <a href="./privacyPolicy/PrivacyPolicy.html"
                    >Privacy Policy</a
                  >
                </li>
              </ul>
            </div>
          </div>

          <div class="col-lg-5 col-md-12 footer-contact">
            <a
              target="_blank"
              style="color: #fff"
              href="https://www.belipolaarboretum.earth/"
            >
              <h4>Contact Us</h4>
            </a>

            <p>
              Belipola Arboretum <br />
              Mirahawatte<br />
              Sri Lanka <br /><br />
              <strong>Phone:</strong> <span>+94 76 719 1428</span><br />
              <strong>Email:</strong
              ><a href="mailto:info@restore.earth">info@restore.earth</a><br />
            </p>
          </div>
        </div>

        <div class="row justify-content-start">
          <div class="col">
            <div class="container">
              <hr class="new4" />
            </div>
          </div>
        </div>
        <div class="row">
          <div class="mt-4 align-items-center justify-content-center">
            <div class="copyright">
              &copy; Copyright <strong><span>EarthRestoration PL</span></strong
              >.
            </div>
            <div class="credits">
              All Rights Reserved Designed | Digital Tehnology Partner
              <a href="https://agro.elzian.com/" target="_blank">Elzian Agro</a>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- End Footer -->

    <script type="text/javascript">
      function googleTranslateElementInit() {
        new google.translate.TranslateElement(
          { pageLanguage: "en" },
          "google_translate_element"
        );
      }
    </script>

    <script
      type="text/javascript"
      src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"
    ></script>

    <main id="main">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.5/js/swiper.min.js"></script>
      <script src="assets/js/LifeForce.js"></script>
    </main>
    <!-- End #main -->

    <a
      href="#"
      class="scroll-top d-flex align-items-center justify-content-center"
      ><i class="bi bi-arrow-up-short"></i
    ></a>

    <div id="preloader">
      <!-- <img src="assets/img/ER LOGO.png"> -->
    </div>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.2/angular.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>

    <!--Email.js-->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"
    ></script>

    <script type="text/javascript">
      emailjs.init("mmvgyCL8_H2l3K5ZQ");
    </script>
    <script>
      angular
        .module("plantApp", [])
        .controller("plantController", function ($scope, $http) {
          $scope.searchText = ""; // Initialize search text
          $scope.showFilterPopover = false;
          $scope.filterByNative = false;
          $scope.filterByEndemic = false;
          $scope.filterByExotic = false;
          $scope.fruitTypes = {
            fleshy: false,
            dehiscent: false,
            translucent: false,
          };

          // Add the following code inside the "plantController" definition
          $scope.filteredPlants = []; // Initialize filtered plants
          $scope.pageSize = 9; // Number of items to display per page
          $scope.currentPage = 1; // Current page number

          // Function to calculate the total number of pages based on the filtered plant count and page size
          $scope.getTotalPages = function () {
            return Math.ceil($scope.filteredPlants.length / $scope.pageSize);
          };

          // Function to create an array of page numbers for pagination
          $scope.getPaginationArray = function () {
            const totalPages = $scope.getTotalPages();
            const paginationArray = [];
            for (let i = 1; i <= totalPages; i++) {
              paginationArray.push(i);
            }
            return paginationArray;
          };

          // Function to go to a specific page
          $scope.goToPage = function (page) {
            if (page >= 1 && page <= $scope.getTotalPages()) {
              $scope.currentPage = page;
            }
          };

          // Function to get the currently visible plants for the current page
          $scope.getCurrentPagePlants = function () {
            const startIndex = ($scope.currentPage - 1) * $scope.pageSize;
            const endIndex = startIndex + $scope.pageSize;
            return $scope.filteredPlants.slice(startIndex, endIndex);
          };

          // Function to filter the plants whenever there is a change in the search, filter, or checkbox options
          $scope.filter = function () {
            $scope.getFilteredPlants();
            $scope.currentPage = 1; // Reset to the first page when filtering is applied
          };

          // Update the pagination whenever the filtered plants change
          $scope.$watch("filteredPlants", function () {
            $scope.currentPage = 1; // Reset to the first page when the filtered plants change
          });

          // Function to open the plant modal and generate the unique chart
          $scope.openPlantModal = function (plantTitle) {
            $scope.selectedPlantTitle = plantTitle;
            $scope.selectedPlant = $scope.filteredPlants.find(
              (plant) => plant.plantName === plantTitle
            );

            // Show the modal
            $("#exampleModal").modal("show");

            // Use the selected plant data to create the unique chart
            generateChart();
          };

          // Function to calculate the Average O2 Production based on the provided formula
          const CalculateAverageO2production = (modelData) => {
            let year1 = modelData?.photosyntheticBiomassYear1
              ? modelData.photosyntheticBiomassYear1
              : 0;
            let year2 = modelData?.photosyntheticBiomassYear2
              ? modelData.photosyntheticBiomassYear2zzz
              : 0;
            let year3 = modelData?.photosyntheticBiomassYear3
              ? modelData.photosyntheticBiomassYear3
              : 0;
            let year4 = modelData?.photosyntheticBiomassYear4
              ? modelData.photosyntheticBiomassYear4
              : 0;

            let o2ProductionYear1 = (year1 * 0.4) / 1.429;
            let o2ProductionYear2 = (year2 * 0.4) / 1.429;
            let o2ProductionYear3 = (year3 * 0.4) / 1.429;
            let o2ProductionYear4 = (year4 * 0.4) / 1.429;

            let o2Production = [
              0,
              o2ProductionYear1,
              o2ProductionYear2,
              o2ProductionYear3,
              o2ProductionYear4,
            ];

            return o2Production;
          };

          // Function to calculate the Average H2O Production based on the provided formula
          const CalculateAverageH2Oproduction = (modelData) => {
            let year1 = modelData?.photosyntheticBiomassYear1
              ? modelData.photosyntheticBiomassYear1
              : 0;
            let year2 = modelData?.photosyntheticBiomassYear2
              ? modelData.photosyntheticBiomassYear2
              : 0;
            let year3 = modelData?.photosyntheticBiomassYear3
              ? modelData.photosyntheticBiomassYear3
              : 0;
            let year4 = modelData?.photosyntheticBiomassYear4
              ? modelData.photosyntheticBiomassYear4
              : 0;

            let h2oProductionYear1 = (year1 * 100) / 1000;
            let h2oProductionYear2 = (year2 * 100) / 1000;
            let h2oProductionYear3 = (year3 * 100) / 1000;
            let h2oProductionYear4 = (year4 * 100) / 1000;

            let h2oProduction = [
              0,
              h2oProductionYear1,
              h2oProductionYear2,
              h2oProductionYear3,
              h2oProductionYear4,
            ];

            return h2oProduction;
          };

          // Function to generate the chart with the selected plant data
          function generateChart() {
            // Get the Average O2 Production data
            var o2ProductionData = CalculateAverageO2production(
              $scope.selectedPlant
            );

            // Get the Average H2O Production data
            var h2oProductionData = CalculateAverageH2Oproduction(
              $scope.selectedPlant
            );

            // Create a new chart for Average O2 Production and Average H2O Production
            var productionCtx = document
              .getElementById("productionChart")
              .getContext("2d");

            // Check if the chart instance already exists, and destroy it if it does
            if ($scope.productionChart) {
              $scope.productionChart.destroy();
            }

            $scope.productionChart = new Chart(productionCtx, {
              type: "line",
              data: {
                labels: ["Year 1", "Year 2", "Year 3", "Year 4"],
                datasets: [
                  {
                    label: "Average O2 Production",
                    data: o2ProductionData,
                    borderColor: "rgb(255, 99, 132)",
                    borderWidth: 1,
                  },
                  {
                    label: "Average H2O Production",
                    data: h2oProductionData,
                    borderColor: "rgb(54, 162, 235)",
                    borderWidth: 1,
                  },
                ],
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                  y: {
                    beginAtZero: true,
                  },
                },
              },
            });

            // Update the chart height after the modal is shown
            $("#exampleModal").on("shown.bs.modal", function () {
              $scope.productionChart.update();
            });

            var ctx = document
              .getElementById("photosyntheticBiomassChart")
              .getContext("2d");

            // Check if the chart instance already exists, and destroy it if it does
            if ($scope.photosyntheticBiomassChart) {
              $scope.photosyntheticBiomassChart.destroy();
            }

            // Create a new chart with the selected plant data
            $scope.photosyntheticBiomassChart = new Chart(ctx, {
              type: "line", // Use 'line' for a line chart
              data: {
                labels: ["Year 1", "Year 2", "Year 3", "Year 4"],
                datasets: [
                  {
                    label: "Photosynthetic Biomass",
                    data: [
                      $scope.selectedPlant.photosyntheticBiomassYear1,
                      $scope.selectedPlant.photosyntheticBiomassYear2,
                      $scope.selectedPlant.photosyntheticBiomassYear3,
                      $scope.selectedPlant.photosyntheticBiomassYear4,
                    ],
                    borderColor: "rgb(2, 48, 32)",
                    borderWidth: 1,
                  },
                ],
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                  y: {
                    beginAtZero: true,
                  },
                },
              },
            });

            // Update the chart height after the modal is shown
            $("#exampleModal").on("shown.bs.modal", function () {
              $scope.photosyntheticBiomassChart.update();
            });
          }

          // Function to toggle the filter popover
          $scope.toggleFilterPopover = function () {
            $scope.showFilterPopover = !$scope.showFilterPopover;
          };

          // Fetch plant data from the API
          $http
            .get("http://localhost:5000/species")
            .then(function (response) {
              $scope.plants = response.data.Result;
              $scope.getFilteredPlants(); // Initialize filtered plants

              // Initialize Slick Carousel after images are rendered
              setTimeout(function () {
                $(".slider").slick({
                  arrows: false,
                  dots: false,
                  infinite: true,
                  autoplay: true,
                  autoplaySpeed: 5000,
                  slidesToShow: 1,
                  slidesToScroll: 1,
                });
              }, 0);
            })
            .catch(function (error) {
              console.log(error);
            });

          // Function to filter plants based on search text and checkbox states
          $scope.getFilteredPlants = function () {
            var searchText = $scope.searchText.toLowerCase();

            // Filter the plants based on the search text and checkbox states
            $scope.filteredPlants = $scope.plants.filter(function (plant) {
              var commonNames = plant.commonNames.toLowerCase();
              var botanicalName = plant.botanicalName.toLowerCase();
              var plantName = plant.plantName.toLowerCase();

              // Check if the search text is present in any of the properties of the plant object
              var matchesSearchText =
                commonNames.includes(searchText) ||
                botanicalName.includes(searchText) ||
                plantName.includes(searchText);

              // Check if the plant matches the selected checkboxes (if they are checked)
              var isNative =
                !$scope.filterByNative || plant.originofSpecies === "Native";
              var isEndemic =
                !$scope.filterByEndemic || plant.originofSpecies === "Endemic";
              var isExotic =
                !$scope.filterByExotic || plant.originofSpecies === "Exotic";

              var isFleshy =
                !$scope.fruitTypes.fleshy || plant.fruitType === "Fleshy";
              var isDehiscent =
                !$scope.fruitTypes.dehiscent || plant.fruitType === "Dehiscent";
              var isTranslucent =
                !$scope.fruitTypes.translucent ||
                plant.fruitType === "Translucent";

              return (
                matchesSearchText &&
                isNative &&
                isEndemic &&
                isExotic &&
                isFleshy &&
                isDehiscent &&
                isTranslucent
              );
            });
          };

          $scope.search = function () {
            $scope.getFilteredPlants();
          };

          $scope.clearSearchText = function () {
            $scope.searchText = "";
            $scope.getFilteredPlants();
          };

          $scope.filter = function () {
            $scope.getFilteredPlants();
          };
        });
    </script>
  </body>
</html>
